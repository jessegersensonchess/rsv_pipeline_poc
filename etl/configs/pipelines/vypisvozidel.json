{
  "source": {
    "kind": "file",
    "file": {
      "path": "testdata/vypisvozidel.csv"
    }
  },
  "runtime": {
    "reader_workers": 2,
    "transform_workers": 6,
    "loader_workers": 2,
    "batch_size": 10000,
    "channel_buffer": 16384
  },
  "parser": {
    "kind": "csv",
    "options": {
      "has_header": true, 
	"stream_scrub_likvidaci": true,
      "comma": ",",
      "trim_space": true,
      "expected_fields": 98,
      "header_map": {
        "Datum 1  registrace": "datum_1_registrace",
        "Datum 1  registrace v ČR": "datum_1_registrace_v_cr",
        "ZTP": "ztp",
        "ES EU": "es_eu",
        "Druh vozidla": "druh_vozidla",
        "Druh vozidla 2  ř ": "druh_vozidla_2_r",
        "Kategorie vozidla": "kategorie_vozidla",
        "Tovární značka": "tovarni_znacka",
        "Typ": "typ",
        "Varianta": "varianta",
        "Verze": "verze",
        "VIN": "vin",
        "Obchodní označení": "obchodni_oznaceni",
        "Výrobce vozidla": "vyrobce_vozidla",
        "Výrobce motoru": "vyrobce_motoru",
        "Typ motoru": "typ_motoru",
        "Max  výkon  kW     min⁻¹ ": "max_vykon_kw_min",
        "Palivo": "palivo",
        "Zdvihový objem  cm³ ": "zdvihovy_objem_cm",
        "Plně elektrické vozidlo": "plne_elektricke_vozidlo",
        "Hybridní vozidlo": "hybridni_vozidlo",
        "Třída hybridního vozidla": "trida_hybridniho_vozidla",
        "Emisní limit  EHKOSN EHSES ": "emisni_limit_ehkosn_ehses",
        "Stupeň plnění emisní úrovně": "stupen_plneni_emisni_urovne",
        "Korigovaný součinitel absorbce  m⁻¹ ": "korigovany_soucinitel_absorbce_m",
        "CO2 město  mimo město kombinované  g km-1 ": "co2_mesto_mimo_mesto_kombinovane_g_km_1",
        "Specifické CO2": "specificke_co2",
        "Snížení emisí – NEDC": "snizeni_emisi_nedc",
        "Snížení emisí – WLTP": "snizeni_emisi_wltp",
        "Spotřeba předpis": "spotreba_predpis",
        "Spotřeba město  mimo město kombinovaná  l 100km⁻¹ ": "spotreba_mesto_mimo_mesto_kombinovana_l_100km",
        "Spotřeba při rychlosti  l 100 km⁻¹ ": "spotreba_pri_rychlosti_l_100_km",
        "Spotřeba el  mobil  Wh km  – Z": "spotreba_el_mobil_wh_km_z",
        "Dojezd ZR  km ": "dojezd_zr_km",
        "Výrobce karoserie": "vyrobce_karoserie",
        "Druh (typ)": "druh_typ",
        "Výrobní číslo karoserie": "vyrobni_cislo_karoserie",
        "Barva": "barva",
        "Barva doplňková": "barva_doplnkova",
        "Počet míst celkem   k sezení   k stání": "pocet_mist_celkem_k_sezeni_k_stani",
        "Celková délka šířka výška  mm ": "celkova_delka_sirka_vyska_mm",
        "Rozvor  mm ": "rozvor_mm",
        "Rozchod  mm ": "rozchod_mm",
        "Provozní hmotnost": "provozni_hmotnost",
        "Největší technicky přípustná povolená hmotnost  kg ": "nejvetsi_technicky_pripustna_povolena_hmotnost_kg",
        "Největší technicky přípustná povolená hmotnost na nápravu  kg ": "nejvetsi_technicky_pripustna_povolena_hmotnost_na_napravu_kg",
        "Největší technicky přípustná povolená hmotnost přípojného vozidla  kg  brzděného": "nejvetsi_ttna_povolena_hmotnost_pripojneho_vozidla_kg_brzdeneho",
        "Největší technicky přípustná povolená hmotnost přípojného vozidla  kg  nebrzděného": "nejvetsi_ta_povolena_hmotnost_pripojneho_vozidla_kg_nebrzdeneho",
        "Největší technicky přípustná povolená hmotnost jízdní soupravy  kg ": "nejvetsi_thnicky_pripustna_povolena_hmotnost_jizdni_soupravy_kg",
        "Hmotnosti vozidla při testu WLTP": "hmotnosti_vozidla_pri_testu_wltp",
        "Průměrná hodnota užitečného zatížení": "prumerna_hodnota_uzitecneho_zatizeni",
        "Spojovací zařízení - druh": "spojovaci_zarizeni_druh",
        "Počet náprav - z toho poháněných": "pocet_naprav_z_toho_pohanenych",
        "Kola a pneumatiky na nápravě - rozměry montáž  N 1; N 2; N 3; N 4 ": "kola_a_pneumatiky_na_naprave_rozmery_montaz_n_1_n_2_n_3_n_4",
        "Vnější hluk vozidla  dB(A)  - stojícího při ot   min⁻¹ ": "vnejsi_hluk_vozidla_dba_stojiciho_pri_ot_min",
        "Za jízdy": "za_jizdy",
        "Nejvyšší rychlost  km h⁻¹ ": "nejvyssi_rychlost_km_h",
        "Poměr Výkon Hmotnost  kW kg⁻¹ ": "pomer_vykon_hmotnost_kw_kg",
        "Inovativní technologie": "inovativni_technologie",
        "Stupeň dokončení": "stupen_dokonceni",
        "Faktor odchylky - DE": "faktor_odchylky_de",
        "Faktor verifikace - Vf": "faktor_verifikace_vf",
        "Účel vozidla": "ucel_vozidla",
        "Další záznamy": "dalsi_zaznamy",
        "Alternativní provedení": "alternativni_provedeni",
        "Číslo TP": "cislo_tp",
        "Číslo ORV": "cislo_orv",
        "Druh RZ": "druh_rz",
        "Zařazení vozidla": "zarazeni_vozidla",
        "Status": "status",
        "PČV": "pcv",
        "ABS": "abs",
        "Airbag": "airbag",
        "ASR": "asr",
        "Brzdy nouzová": "brzdy_nouzova",
        "Brzdy odlehčovací": "brzdy_odlehcovaci",
        "Brzdy parkovací": "brzdy_parkovaci",
        "Brzdy provozní": "brzdy_provozni",
        "Doplňkový text na TP": "doplnkovy_text_na_tp",
        "Hmotnosti provozní Do": "hmotnosti_provozni_do",
        "Hmotnosti zatížení SZ": "hmotnosti_zatizeni_sz",
        "Hmotnosti zatížení SZ typ": "hmotnosti_zatizeni_sz_typ",
        "Hydropohon": "hydropohon",
        "Objem cisterny": "objem_cisterny",
        "Zatížení střechy": "zatizeni_strechy",
        "Číslo motoru": "cislo_motoru",
        "Nejvyšší rychlost omezení": "nejvyssi_rychlost_omezeni",
        "Ovládání brzd SZ": "ovladani_brzd_sz",
        "Ovládání brzd SZ druh": "ovladani_brzd_sz_druh",
        "Retarder": "retarder",
        "Rok výroby": "rok_vyroby",
        "Délka do": "delka_do",
        "Ložná délka": "lozna_delka",
        "Ložná šířka": "lozna_sirka",
        "Výška do": "vyska_do",
        "Typ kód": "typ_kod",
        "RM zániku": "rm_zaniku",
        "Stupeň autonomity vozidla": "stupen_autonomity_vozidla"
      }
    }
  },
  "transform": [
    {
      "kind": "coerce",
      "options": {
        "layout": "02.01.2006",
        "types": {
          "abs": "bool",
          "asr": "bool",
          "brzdy_nouzova": "bool",
          "brzdy_odlehcovaci": "bool",
          "brzdy_parkovaci": "bool",
          "brzdy_provozni": "bool",
          "datum_1_registrace": "date",
          "datum_1_registrace_v_cr": "date",
          "hmotnosti_provozni_do": "int",
          "hmotnosti_zatizeni_sz": "int",
          "hydropohon": "bool",
          "lozna_delka": "int",
          "lozna_sirka": "int",
          "nejvyssi_rychlost_km_h": "int",
          "nejvyssi_rychlost_omezeni": "int",
          "objem_cisterny": "int",
          "pcv": "int",
          "pomer_vykon_hmotnost_kw_kg": "int",
          "provozni_hmotnost": "int",
          "retarder": "bool",
          "rok_vyroby": "int",
          "za_jizdy": "int",
          "zatizeni_strechy": "int"
        }
      }
    },
    {
      "kind": "validate",
      "options": {
        "policy": "lenient",
        "contract": {
          "name": "vypisvozidel",
          "fields": [
            {
              "name": "datum_1_registrace",
              "type": "date",
              "layout": "02.01.2006"
            },
            {
              "name": "datum_1_registrace_v_cr",
              "type": "date",
              "layout": "02.01.2006"
            },
            {
              "name": "ztp",
              "type": "text"
            },
            {
              "name": "es_eu",
              "type": "text"
            },
            {
              "name": "druh_vozidla",
              "type": "text"
            },
            {
              "name": "druh_vozidla_2_r",
              "type": "text"
            },
            {
              "name": "kategorie_vozidla",
              "type": "text"
            },
            {
              "name": "tovarni_znacka",
              "type": "text"
            },
            {
              "name": "typ",
              "type": "text"
            },
            {
              "name": "varianta",
              "type": "text"
            },
            {
              "name": "verze",
              "type": "text"
            },
            {
              "name": "vin",
              "type": "text"
            },
            {
              "name": "obchodni_oznaceni",
              "type": "text"
            },
            {
              "name": "vyrobce_vozidla",
              "type": "text"
            },
            {
              "name": "vyrobce_motoru",
              "type": "text"
            },
            {
              "name": "typ_motoru",
              "type": "text"
            },
            {
              "name": "max_vykon_kw_min",
              "type": "text"
            },
            {
              "name": "palivo",
              "type": "text"
            },
            {
              "name": "zdvihovy_objem_cm",
              "type": "text"
            },
            {
              "name": "plne_elektricke_vozidlo",
              "type": "text"
            },
            {
              "name": "hybridni_vozidlo",
              "type": "text"
            },
            {
              "name": "trida_hybridniho_vozidla",
              "type": "text"
            },
            {
              "name": "emisni_limit_ehkosn_ehses",
              "type": "text"
            },
            {
              "name": "stupen_plneni_emisni_urovne",
              "type": "text"
            },
            {
              "name": "korigovany_soucinitel_absorbce_m",
              "type": "text"
            },
            {
              "name": "co2_mesto_mimo_mesto_kombinovane_g_km_1",
              "type": "text"
            },
            {
              "name": "specificke_co2",
              "type": "text"
            },
            {
              "name": "snizeni_emisi_nedc",
              "type": "text"
            },
            {
              "name": "snizeni_emisi_wltp",
              "type": "text"
            },
            {
              "name": "spotreba_predpis",
              "type": "text"
            },
            {
              "name": "spotreba_mesto_mimo_mesto_kombinovana_l_100km",
              "type": "text"
            },
            {
              "name": "spotreba_pri_rychlosti_l_100_km",
              "type": "text"
            },
            {
              "name": "spotreba_el_mobil_wh_km_z",
              "type": "text"
            },
            {
              "name": "dojezd_zr_km",
              "type": "text"
            },
            {
              "name": "vyrobce_karoserie",
              "type": "text"
            },
            {
              "name": "druh_typ",
              "type": "text"
            },
            {
              "name": "vyrobni_cislo_karoserie",
              "type": "text"
            },
            {
              "name": "barva",
              "type": "text"
            },
            {
              "name": "barva_doplnkova",
              "type": "text"
            },
            {
              "name": "pocet_mist_celkem_k_sezeni_k_stani",
              "type": "text"
            },
            {
              "name": "celkova_delka_sirka_vyska_mm",
              "type": "text"
            },
            {
              "name": "rozvor_mm",
              "type": "text"
            },
            {
              "name": "rozchod_mm",
              "type": "text"
            },
            {
              "name": "provozni_hmotnost",
              "type": "int"
            },
            {
              "name": "nejvetsi_technicky_pripustna_povolena_hmotnost_kg",
              "type": "text"
            },
            {
              "name": "nejvetsi_technicky_pripustna_povolena_hmotnost_na_napravu_kg",
              "type": "text"
            },
            {
              "name": "nejvetsi_ttna_povolena_hmotnost_pripojneho_vozidla_kg_brzdeneho",
              "type": "text"
            },
            {
              "name": "nejvetsi_ta_povolena_hmotnost_pripojneho_vozidla_kg_nebrzdeneho",
              "type": "text"
            },
            {
              "name": "nejvetsi_thnicky_pripustna_povolena_hmotnost_jizdni_soupravy_kg",
              "type": "text"
            },
            {
              "name": "hmotnosti_vozidla_pri_testu_wltp",
              "type": "text"
            },
            {
              "name": "prumerna_hodnota_uzitecneho_zatizeni",
              "type": "text"
            },
            {
              "name": "spojovaci_zarizeni_druh",
              "type": "text"
            },
            {
              "name": "pocet_naprav_z_toho_pohanenych",
              "type": "text"
            },
            {
              "name": "kola_a_pneumatiky_na_naprave_rozmery_montaz_n_1_n_2_n_3_n_4",
              "type": "text"
            },
            {
              "name": "vnejsi_hluk_vozidla_dba_stojiciho_pri_ot_min",
              "type": "text"
            },
            {
              "name": "za_jizdy",
              "type": "int"
            },
            {
              "name": "nejvyssi_rychlost_km_h",
              "type": "int"
            },
            {
              "name": "pomer_vykon_hmotnost_kw_kg",
              "type": "int"
            },
            {
              "name": "inovativni_technologie",
              "type": "text"
            },
            {
              "name": "stupen_dokonceni",
              "type": "text"
            },
            {
              "name": "faktor_odchylky_de",
              "type": "text"
            },
            {
              "name": "faktor_verifikace_vf",
              "type": "text"
            },
            {
              "name": "ucel_vozidla",
              "type": "text"
            },
            {
              "name": "dalsi_zaznamy",
              "type": "text"
            },
            {
              "name": "alternativni_provedeni",
              "type": "text"
            },
            {
              "name": "cislo_tp",
              "type": "text"
            },
            {
              "name": "cislo_orv",
              "type": "text"
            },
            {
              "name": "druh_rz",
              "type": "text"
            },
            {
              "name": "zarazeni_vozidla",
              "type": "text"
            },
            {
              "name": "status",
              "type": "text"
            },
            {
              "name": "pcv",
              "type": "bigint",
              "required": true
            },
            {
              "name": "abs",
              "type": "bool",
              "truthy": [
                "1",
                "t",
                "true",
                "yes",
                "y"
              ],
              "falsy": [
                "0",
                "f",
                "false",
                "no",
                "n"
              ]
            },
            {
              "name": "airbag",
              "type": "text"
            },
            {
              "name": "asr",
              "type": "bool",
              "truthy": [
                "1",
                "t",
                "true",
                "yes",
                "y"
              ],
              "falsy": [
                "0",
                "f",
                "false",
                "no",
                "n"
              ]
            },
            {
              "name": "brzdy_nouzova",
              "type": "bool",
              "truthy": [
                "1",
                "t",
                "true",
                "yes",
                "y"
              ],
              "falsy": [
                "0",
                "f",
                "false",
                "no",
                "n"
              ]
            },
            {
              "name": "brzdy_odlehcovaci",
              "type": "bool",
              "truthy": [
                "1",
                "t",
                "true",
                "yes",
                "y"
              ],
              "falsy": [
                "0",
                "f",
                "false",
                "no",
                "n"
              ]
            },
            {
              "name": "brzdy_parkovaci",
              "type": "bool",
              "truthy": [
                "1",
                "t",
                "true",
                "yes",
                "y"
              ],
              "falsy": [
                "0",
                "f",
                "false",
                "no",
                "n"
              ]
            },
            {
              "name": "brzdy_provozni",
              "type": "bool",
              "truthy": [
                "1",
                "t",
                "true",
                "yes",
                "y"
              ],
              "falsy": [
                "0",
                "f",
                "false",
                "no",
                "n"
              ]
            },
            {
              "name": "doplnkovy_text_na_tp",
              "type": "text"
            },
            {
              "name": "hmotnosti_provozni_do",
              "type": "int"
            },
            {
              "name": "hmotnosti_zatizeni_sz",
              "type": "int"
            },
            {
              "name": "hmotnosti_zatizeni_sz_typ",
              "type": "text"
            },
            {
              "name": "hydropohon",
              "type": "bool",
              "truthy": [
                "1",
                "t",
                "true",
                "yes",
                "y"
              ],
              "falsy": [
                "0",
                "f",
                "false",
                "no",
                "n"
              ]
            },
            {
              "name": "objem_cisterny",
              "type": "int"
            },
            {
              "name": "zatizeni_strechy",
              "type": "int"
            },
            {
              "name": "cislo_motoru",
              "type": "text"
            },
            {
              "name": "nejvyssi_rychlost_omezeni",
              "type": "int"
            },
            {
              "name": "ovladani_brzd_sz",
              "type": "text"
            },
            {
              "name": "ovladani_brzd_sz_druh",
              "type": "text"
            },
            {
              "name": "retarder",
              "type": "bool",
              "truthy": [
                "1",
                "t",
                "true",
                "yes",
                "y"
              ],
              "falsy": [
                "0",
                "f",
                "false",
                "no",
                "n"
              ]
            },
            {
              "name": "rok_vyroby",
              "type": "int"
            },
            {
              "name": "delka_do",
              "type": "text"
            },
            {
              "name": "lozna_delka",
              "type": "int"
            },
            {
              "name": "lozna_sirka",
              "type": "int"
            },
            {
              "name": "vyska_do",
              "type": "text"
            },
            {
              "name": "typ_kod",
              "type": "text"
            },
            {
              "name": "rm_zaniku",
              "type": "text"
            },
            {
              "name": "stupen_autonomity_vozidla",
              "type": "text"
            }
          ]
        }
      }
    }
  ],
  "storage": {
    "kind": "postgres",
    "postgres": {
      "dsn": "postgresql://user:password@0.0.0.0:5432/testdb?sslmode=disable",
      "table": "public.vypisvozidel",
      "columns": [
        "datum_1_registrace",
        "datum_1_registrace_v_cr",
        "ztp",
        "es_eu",
        "druh_vozidla",
        "druh_vozidla_2_r",
        "kategorie_vozidla",
        "tovarni_znacka",
        "typ",
        "varianta",
        "verze",
        "vin",
        "obchodni_oznaceni",
        "vyrobce_vozidla",
        "vyrobce_motoru",
        "typ_motoru",
        "max_vykon_kw_min",
        "palivo",
        "zdvihovy_objem_cm",
        "plne_elektricke_vozidlo",
        "hybridni_vozidlo",
        "trida_hybridniho_vozidla",
        "emisni_limit_ehkosn_ehses",
        "stupen_plneni_emisni_urovne",
        "korigovany_soucinitel_absorbce_m",
        "co2_mesto_mimo_mesto_kombinovane_g_km_1",
        "specificke_co2",
        "snizeni_emisi_nedc",
        "snizeni_emisi_wltp",
        "spotreba_predpis",
        "spotreba_mesto_mimo_mesto_kombinovana_l_100km",
        "spotreba_pri_rychlosti_l_100_km",
        "spotreba_el_mobil_wh_km_z",
        "dojezd_zr_km",
        "vyrobce_karoserie",
        "druh_typ",
        "vyrobni_cislo_karoserie",
        "barva",
        "barva_doplnkova",
        "pocet_mist_celkem_k_sezeni_k_stani",
        "celkova_delka_sirka_vyska_mm",
        "rozvor_mm",
        "rozchod_mm",
        "provozni_hmotnost",
        "nejvetsi_technicky_pripustna_povolena_hmotnost_kg",
        "nejvetsi_technicky_pripustna_povolena_hmotnost_na_napravu_kg",
        "nejvetsi_ttna_povolena_hmotnost_pripojneho_vozidla_kg_brzdeneho",
        "nejvetsi_ta_povolena_hmotnost_pripojneho_vozidla_kg_nebrzdeneho",
        "nejvetsi_thnicky_pripustna_povolena_hmotnost_jizdni_soupravy_kg",
        "hmotnosti_vozidla_pri_testu_wltp",
        "prumerna_hodnota_uzitecneho_zatizeni",
        "spojovaci_zarizeni_druh",
        "pocet_naprav_z_toho_pohanenych",
        "kola_a_pneumatiky_na_naprave_rozmery_montaz_n_1_n_2_n_3_n_4",
        "vnejsi_hluk_vozidla_dba_stojiciho_pri_ot_min",
        "za_jizdy",
        "nejvyssi_rychlost_km_h",
        "pomer_vykon_hmotnost_kw_kg",
        "inovativni_technologie",
        "stupen_dokonceni",
        "faktor_odchylky_de",
        "faktor_verifikace_vf",
        "ucel_vozidla",
        "dalsi_zaznamy",
        "alternativni_provedeni",
        "cislo_tp",
        "cislo_orv",
        "druh_rz",
        "zarazeni_vozidla",
        "status",
        "pcv",
        "abs",
        "airbag",
        "asr",
        "brzdy_nouzova",
        "brzdy_odlehcovaci",
        "brzdy_parkovaci",
        "brzdy_provozni",
        "doplnkovy_text_na_tp",
        "hmotnosti_provozni_do",
        "hmotnosti_zatizeni_sz",
        "hmotnosti_zatizeni_sz_typ",
        "hydropohon",
        "objem_cisterny",
        "zatizeni_strechy",
        "cislo_motoru",
        "nejvyssi_rychlost_omezeni",
        "ovladani_brzd_sz",
        "ovladani_brzd_sz_druh",
        "retarder",
        "rok_vyroby",
        "delka_do",
        "lozna_delka",
        "lozna_sirka",
        "vyska_do",
        "typ_kod",
        "rm_zaniku",
        "stupen_autonomity_vozidla"
      ],
      "key_columns": ["pcv"],
      "auto_create_table": true
    }
  }
}
